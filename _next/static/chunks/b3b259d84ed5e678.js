(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,t=>{"use strict";var e=t.i(43476),s=t.i(25913),a=t.i(47163);let n=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-purple-500/10 text-purple-400",secondary:"border-transparent bg-white/5 text-gray-300",destructive:"border-transparent bg-red-500/10 text-red-400",success:"border-transparent bg-green-500/10 text-green-400",warning:"border-transparent bg-yellow-500/10 text-yellow-400",outline:"text-gray-300 border-white/10"}},defaultVariants:{variant:"default"}});function r({className:t,variant:s,...r}){return(0,e.jsx)("div",{className:(0,a.cn)(n({variant:s}),t),...r})}t.s(["Badge",()=>r])},52749,t=>{"use strict";t.s(["API_BASE_URL",0,"https://api.devnet.rentmyx.fun"])},7233,t=>{"use strict";let e=(0,t.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);t.s(["Plus",()=>e],7233)},95765,t=>{"use strict";var e=t.i(52749);async function s(t,s){let a=new URL(`${e.API_BASE_URL}/api/campaigns/`);s&&a.searchParams.append("status",s);let n=await fetch(a.toString(),{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!n.ok)throw Error((await n.json()).error||"Failed to fetch campaigns");return n.json()}async function a(t,s){let a=await fetch(`${e.API_BASE_URL}/api/campaigns/${s}/`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok)throw Error((await a.json()).error||"Failed to fetch campaign");return a.json()}async function n(t,s){let a=await fetch(`${e.API_BASE_URL}/api/campaigns/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw Error((await a.json()).error||"Failed to create campaign");return a.json()}async function r(t,s,a){let n=await fetch(`${e.API_BASE_URL}/api/campaigns/calculate-cost/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({influencer_ids:s,duration_weeks:a})});if(!n.ok)throw Error((await n.json()).error||"Failed to calculate cost");return n.json()}async function i(t,s,a){let n=await fetch(`${e.API_BASE_URL}/api/campaigns/${s}/confirm-payment/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok)throw Error((await n.json()).error||"Failed to confirm payment");return n.json()}async function o(t,s){let a=await fetch(`${e.API_BASE_URL}/api/campaigns/${s}/bookings/`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok)throw Error((await a.json()).error||"Failed to fetch bookings");return a.json()}t.s(["calculateCampaignCost",()=>r,"confirmCampaignPayment",()=>i,"createCampaign",()=>n,"getCampaign",()=>a,"getCampaignBookings",()=>o,"getCampaigns",()=>s])},54616,t=>{"use strict";var e=t.i(71645),s=t.i(14272),a=t.i(40143),n=t.i(15823),r=t.i(19273),i=class extends n.Subscribable{#t;#e=void 0;#s;#a;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,r.shallowEqualObjects)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,r.hashKey)(e.mutationKey)!==(0,r.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#r(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#r()}mutate(t,e){return this.#a=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){let t=this.#s?.state??(0,s.getDefaultState)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#r(t){a.notifyManager.batch(()=>{if(this.#a&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context,a={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#a.onSuccess?.(t.data,e,s,a),this.#a.onSettled?.(t.data,null,e,s,a)):t?.type==="error"&&(this.#a.onError?.(t.error,e,s,a),this.#a.onSettled?.(void 0,t.error,e,s,a))}this.listeners.forEach(t=>{t(this.#e)})})}},o=t.i(12598);function l(t,s){let n=(0,o.useQueryClient)(s),[l]=e.useState(()=>new i(n,t));e.useEffect(()=>{l.setOptions(t)},[l,t]);let c=e.useSyncExternalStore(e.useCallback(t=>l.subscribe(a.notifyManager.batchCalls(t)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),u=e.useCallback((t,e)=>{l.mutate(t,e).catch(r.noop)},[l]);if(c.error&&(0,r.shouldThrowError)(l.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}t.s(["useMutation",()=>l],54616)},59611,t=>{"use strict";var e=t.i(43476),s=t.i(66027),a=t.i(54616),n=t.i(12598),r=t.i(62319),i=t.i(70065),o=t.i(67881),l=t.i(94179),c=t.i(47163),u=t.i(22016),d=t.i(7233),m=t.i(31278),h=t.i(39312),p=t.i(95765),x=t.i(5766),f=t.i(71645);function g(){let t=(0,n.useQueryClient)(),[g,y]=(0,f.useState)(null),{data:b,isLoading:j,error:C}=(0,s.useQuery)({queryKey:["brand-campaigns"],queryFn:async()=>{let t=localStorage.getItem("access_token");return t?(0,p.getCampaigns)(t):[]},retry:1}),v=(0,a.useMutation)({mutationFn:async t=>{let e=localStorage.getItem("access_token");if(!e)throw Error("Not authenticated");let s=`MOCK_TX_${Date.now()}_${Math.random().toString(36).substring(7)}`;return(0,p.confirmCampaignPayment)(e,t.id,{tx_signature:s,influencer_ids:[]})},onMutate:t=>{y(t.id),x.toast.loading("Creating bookings and notifying influencers...",{id:"mock-payment"})},onSuccess:e=>{x.toast.dismiss("mock-payment");let s=e.influencer_usernames?.length>0?` (${e.influencer_usernames.join(", ")})`:"";x.toast.success(`âœ… ${e.bookings_created} booking${1!==e.bookings_created?"s":""} created${s}!

ðŸ”” Influencers will see pending requests on their dashboard.`,{duration:5e3}),t.invalidateQueries({queryKey:["brand-campaigns"]}),y(null)},onError:(t,e)=>{x.toast.dismiss("mock-payment"),x.toast.error(t.message||"Failed to confirm payment"),y(null)}}),N=t=>{let e={draft:{label:"Draft",variant:"outline"},pending_payment:{label:"Pending Payment",variant:"secondary"},active:{label:"Active",variant:"success"},completed:{label:"Completed",variant:"default"},cancelled:{label:"Cancelled",variant:"destructive"}};return e[t]||e.draft};return(0,e.jsxs)("div",{className:"min-h-screen",children:[(0,e.jsx)(r.Navbar,{role:"brand"}),(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold",children:"My Campaigns"}),(0,e.jsx)(u.default,{href:"/brand/create-campaign",children:(0,e.jsxs)(o.Button,{children:[(0,e.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})})]}),(0,e.jsx)(i.Card,{className:"mb-8 border-purple-200 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20",children:(0,e.jsx)(i.CardContent,{className:"py-4",children:(0,e.jsxs)("div",{className:"flex items-start gap-3",children:[(0,e.jsx)(h.Zap,{className:"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-1",children:"Demo Mode Available"}),(0,e.jsxs)("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:["Click ",(0,e.jsx)("span",{className:"font-semibold",children:'"Mock Confirm Payment"'})," on any draft campaign to simulate payment confirmation. The system will automatically create bookings and send notifications to influencers. Influencers will see pending booking requests on their dashboard."]})]})]})})}),j?(0,e.jsx)(i.Card,{children:(0,e.jsxs)(i.CardContent,{className:"py-8 text-center text-muted-foreground",children:[(0,e.jsx)(m.Loader2,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"Loading campaigns..."]})}):C?(0,e.jsx)(i.Card,{children:(0,e.jsxs)(i.CardContent,{className:"py-8 text-center text-muted-foreground",children:[(0,e.jsx)("p",{className:"mb-2",children:"Unable to load campaigns"}),(0,e.jsx)("p",{className:"text-sm",children:"Please make sure you're logged in as a brand"})]})}):b&&0!==b.length?(0,e.jsx)(i.Card,{children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"w-full",children:[(0,e.jsx)("thead",{className:"border-b bg-muted/50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Campaign"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Start"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Amount"}),(0,e.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),(0,e.jsx)("tbody",{children:b.map(t=>(0,e.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,e.jsxs)("td",{className:"px-4 py-4",children:[(0,e.jsx)("div",{className:"font-medium",children:t.name}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[t.rental_type.toUpperCase()," â€¢ ",t.duration_weeks,"w"]})]}),(0,e.jsx)("td",{className:"px-4 py-4",children:(0,e.jsx)(l.Badge,{variant:N(t.status).variant,children:N(t.status).label})}),(0,e.jsx)("td",{className:"px-4 py-4 text-sm",children:new Date(t.start_date).toLocaleDateString()}),(0,e.jsx)("td",{className:"px-4 py-4",children:(0,e.jsxs)("div",{className:"font-medium",children:[(0,c.formatUSDC)(t.total_amount_usdc)," USDC"]})}),(0,e.jsx)("td",{className:"px-4 py-4 text-right",children:(0,e.jsxs)("div",{className:"flex gap-2 justify-end",children:["draft"===t.status&&(0,e.jsx)(o.Button,{variant:"default",size:"sm",onClick:()=>v.mutate(t),disabled:g===t.id,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:g===t.id?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(m.Loader2,{className:"mr-2 h-3 w-3 animate-spin"}),"Processing..."]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Zap,{className:"mr-2 h-3 w-3"}),"Mock Confirm Payment"]})}),(0,e.jsx)(u.default,{href:`/brand/campaigns/${t.id}`,children:(0,e.jsx)(o.Button,{variant:"outline",size:"sm",children:"View"})})]})})]},t.id))})]})})}):(0,e.jsx)(i.Card,{children:(0,e.jsxs)(i.CardContent,{className:"py-12 text-center",children:[(0,e.jsx)("p",{className:"text-lg text-muted-foreground mb-2",children:"No campaigns yet"}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first campaign to start renting influencer profiles."}),(0,e.jsx)(u.default,{href:"/brand/create-campaign",children:(0,e.jsxs)(o.Button,{children:[(0,e.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})})]})})]})]})}t.s(["default",()=>g])}]);