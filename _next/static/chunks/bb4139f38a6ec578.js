(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},44215,63209,e=>{"use strict";e.i(47167);let t="https://api.devnet.rentmyx.fun",r=new class{accessToken=null;refreshToken=null;constructor(){this.accessToken=localStorage.getItem("access_token"),this.refreshToken=localStorage.getItem("refresh_token")}setTokens(e,t){this.accessToken=e,this.refreshToken=t,localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)}clearTokens(){this.accessToken=null,this.refreshToken=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")}getAccessToken(){return this.accessToken}isAuthenticated(){return!!this.accessToken}async request(e,r={}){let s=`${t}${e}`,n={"Content-Type":"application/json"};this.accessToken&&(n.Authorization=`Bearer ${this.accessToken}`);let a={...r,headers:{...n,...r.headers}};try{let e=await fetch(s,a);if(401===e.status&&this.refreshToken){if(await this.refreshAccessToken()){let e={...n,Authorization:`Bearer ${this.accessToken}`},t=await fetch(s,{...a,headers:e});if(!t.ok)throw Error(`API error: ${t.statusText}`);return await t.json()}throw this.clearTokens(),Error("Session expired. Please login again.")}if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||t.detail||e.statusText)}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}getTwitterLoginUrl(e){let r=new URLSearchParams;return r.append("redirect_to",window.location.origin+"/auth/callback"),e&&r.append("role",e),`${t}/auth/twitter/login/?${r.toString()}`}async getCurrentUser(){return this.request("/auth/me/")}async refreshAccessToken(){if(!this.refreshToken)return!1;try{let e=await fetch(`${t}/auth/twitter/refresh/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.accessToken}`}});if(!e.ok)return!1;return await e.json(),!0}catch(e){return console.error("Token refresh failed:",e),!1}}async saveWalletAddress(e){return this.request("/auth/wallet/",{method:"POST",body:JSON.stringify({wallet_address:e})})}async completeOnboarding(e){return this.request("/auth/onboarding/",{method:"POST",body:JSON.stringify(e)})}async logout(){try{await this.request("/auth/logout/",{method:"POST"})}finally{this.clearTokens()}}async getInfluencerProfile(){return this.request("/api/influencers/me/")}async updateInfluencerProfile(e){return this.request("/api/influencers/me/",{method:"POST",body:JSON.stringify(e)})}async updateInfluencerSettings(e){return this.request("/api/influencers/settings/",{method:"PATCH",body:JSON.stringify(e)})}async updateInfluencerPrice(e){return this.request("/api/influencers/settings/price/",{method:"PATCH",body:JSON.stringify({weekly_price_usdc:e})})}async updateInfluencerTags(e,t){return this.request("/api/influencers/settings/tags/",{method:"PATCH",body:JSON.stringify({tags_positive:e,tags_negative:t})})}async searchTags(e=""){let t=e?`?q=${encodeURIComponent(e)}`:"";return this.request(`/api/influencers/tags/search/${t}`)}async listTags(e){let t=e?`?search=${encodeURIComponent(e)}`:"";return this.request(`/api/influencers/tags/${t}`)}async createTag(e){return this.request("/api/influencers/tags/create/",{method:"POST",body:JSON.stringify(e)})}};function s(){let e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e)}catch{return null}}function n(e){localStorage.setItem("user",JSON.stringify(e))}e.s(["apiClient",0,r,"cacheUser",()=>n,"getCachedUser",()=>s],44215);let a=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},57222,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),n=e.i(70065),a=e.i(44215),i=e.i(31278),c=e.i(63209);let o=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var l=e.i(67881);function u(){let e=(0,s.useRouter)(),u=(0,s.useSearchParams)(),[h,d]=(0,r.useState)("loading"),[m,g]=(0,r.useState)("Processing authentication...");return(0,r.useEffect)(()=>{(async()=>{try{let t=u.get("access_token"),r=u.get("refresh_token"),s=u.get("user_id"),n=u.get("username"),i=u.get("role"),c=u.get("needs_onboarding"),o=u.get("intended_role"),l=u.get("error");if(l){d("error"),g(decodeURIComponent(l));return}if(!t||!r||!s||!n){d("error"),g("Invalid authentication response. Missing required parameters.");return}a.apiClient.setTokens(t,r);let h=await a.apiClient.getCurrentUser();(0,a.cacheUser)(h),d("success"),g(`Welcome, @${n}!`),"true"===c?setTimeout(()=>{e.push(`/auth/onboarding?role=${o||""}`)},1500):i?setTimeout(()=>{e.push(`/${i}`)},1500):setTimeout(()=>{e.push("/login")},1500)}catch(e){console.error("Callback processing error:",e),d("error"),g(e instanceof Error?e.message:"An unexpected error occurred during authentication.")}})()},[u,e]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/50",children:(0,t.jsx)(n.Card,{className:"w-full max-w-md",children:(0,t.jsx)(n.CardContent,{className:"pt-12 pb-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:["loading"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Loader2,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:m}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Please wait while we complete your authentication..."})]}),"success"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"h-12 w-12 text-green-500"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:m}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Redirecting you to your dashboard..."})]}),"error"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.AlertCircle,{className:"h-12 w-12 text-destructive"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Authentication Failed"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:m}),(0,t.jsx)(l.Button,{onClick:()=>e.push("/login"),className:"mt-4",children:"Return to Login"})]})]})})})})}function h(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/50",children:(0,t.jsx)(n.Card,{className:"w-full max-w-md",children:(0,t.jsx)(n.CardContent,{className:"py-12 text-center",children:(0,t.jsx)(i.Loader2,{className:"h-12 w-12 animate-spin text-primary mx-auto"})})})}),children:(0,t.jsx)(u,{})})}e.s(["default",()=>h],57222)}]);